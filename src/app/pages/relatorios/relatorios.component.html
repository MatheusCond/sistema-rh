<section class="relatorios-container">
    <h1>Relat√≥rios de Recursos Humanos</h1>
    <p class="subtitle">Gere relat√≥rios detalhados sobre funcion√°rios, folha de pagamento e benef√≠cios.</p>

    <div class="filtros">
      <select [(ngModel)]="filtros.tipo">
        <option *ngFor="let tipo of tiposRelatorio" [value]="tipo">{{ tipo }}</option>
      </select>
  
      <div class="periodo">
        <input type="date" [(ngModel)]="filtros.inicio" placeholder="Data in√≠cio">
        <input type="date" [(ngModel)]="filtros.fim" placeholder="Data fim">
      </div>
  
      <select [(ngModel)]="filtros.departamento">
        <option value="todos">Todos Departamentos</option>
        <option *ngFor="let dept of departamentos" [value]="dept">{{ dept }}</option>
      </select>
  
      <div class="formatos">
        <button *ngFor="let fmt of formatos" 
                [class.active]="filtros.formato === fmt"
                (click)="filtros.formato = fmt">
          {{ fmt }}
        </button>
      </div>
  
      <button class="generate-btn" (click)="gerarRelatorio()">Gerar Relat√≥rio</button>
    </div>
  
    <div class="table-responsive">
      <table>
        <thead>
          <tr>
            <th (click)="ordenar('funcionario')">Nome do Funcion√°rio</th>
            <th (click)="ordenar('cargo')">Cargo</th>
            <th (click)="ordenar('departamento')">Departamento</th>
            <th (click)="ordenar('admissao')">Data de Admiss√£o</th>
            <th (click)="ordenar('salario')">Sal√°rio Atual</th>
            <th>Benef√≠cios Recebidos</th>
            <th>Status</th>
            <th>A√ß√µes</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let relatorio of relatorios()">
            <td>{{ relatorio.funcionario }}</td>
            <td>{{ relatorio.cargo }}</td>
            <td>{{ relatorio.departamento }}</td>
            <td>{{ relatorio.admissao | date:'dd/MM/yyyy' }}</td>
            <td>{{ relatorio.salario | currency:'BRL' }}</td>
            <td>{{ relatorio.beneficios.join(', ') }}</td>
            <td>
              <span class="status-badge" [class.ativo]="relatorio.status">
                {{ relatorio.status ? 'Ativo' : 'Inativo' }}
              </span>
            </td>
            <td class="actions">
              <button class="pdf-btn" (click)="exportar('PDF')">üìÑ</button>
              <button class="excel-btn" (click)="exportar('Excel')">üìä</button>
              <button class="details-btn" (click)="abrirDetalhes(relatorio)">üëÅÔ∏è</button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </section>
  
  <!-- Modal de Detalhes -->
  <div class="modal-overlay" *ngIf="showModal">
    <div class="modal">
      <h2>Detalhes do Relat√≥rio</h2>
      <div class="modal-content" *ngIf="selectedRelatorio">
        <div class="info-group">
          <label>Funcion√°rio:</label>
          <p>{{ selectedRelatorio.funcionario }}</p>
        </div>
        
        <div class="info-group">
          <label>Cargo:</label>
          <p>{{ selectedRelatorio.cargo }}</p>
        </div>
  
        <div class="info-group">
          <label>Sal√°rio Detalhado:</label>
          <p>{{ selectedRelatorio.salario | currency:'BRL' }}</p>
        </div>
  
        <div class="info-group">
          <label>Benef√≠cios:</label>
          <ul>
            <li *ngFor="let beneficio of selectedRelatorio.beneficios">{{ beneficio }}</li>
          </ul>
        </div>
  
        <button class="close-btn" (click)="fecharModal()">Fechar</button>
      </div>
    </div>
  </div>  